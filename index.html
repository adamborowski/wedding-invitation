<!DOCTYPE html>
<html lang="en" class="no-js demo-1">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookBlock: A Content Flip Plugin - Demo 1</title>
    <meta name="description" content="Bookblock: A Content Flip Plugin - Demo 1"/>
    <meta name="keywords" content="javascript, jquery, plugin, css3, flip, page, 3d, booklet, book, perspective"/>
    <meta name="author" content="Codrops"/>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="style/stylesheets/main.css"/>
    <script src="js/modernizr.custom.js"></script>
    <script src="js/aes.js"></script>
</head>
<body>
<div class="container">


    <div class="main clearfix">
        <div class="bb-custom-wrapper">
            <!--<h3>Illustrations by <a href="http://dribbble.com/kevinhowdeshell">Kevin Howdeshell</a></h3>-->
            <div id="bb-bookblock" class="bb-bookblock">
                <div class="bb-item">
                    <div class="a-blank-page a-upper-page"></div>
                    <div id="ourPhoto" class="a-lower-page"></div>
                </div>
                <div class="bb-item">
                    <div class="a-upper-page"></div>
                    <div class="a-lower-page" id="a-inner-page">
                        <p>Z ogromną radością zapraszamy</p>

                        <p id="person">&nbsp;</p>

                        <p>Na uroczystość naszych zaślubin, które odbędą się</p>

                        <p>21 listopada 2015 r. o godz. 13:00</p>

                        <p>w kościele <strong>*</strong> pw. Matki Bożej Nieustającej Pomocy i św. Piotra Rybaka</p>

                        <p>przy ul. Portowej 2 w Gdyni.</p>

                        <p>Katarzyna Szefler i Adam Borowski</p>

                        <p>wraz z rodzicami</p>

                        <p><strong>*</strong> Będziemy przeszczęśliwi, gdy uczestnicząc z nami w Eucharystii,<br/>
                            przyjmiecie Komunię Świętą w naszej intencji.</p>

                    </div>
                    <div id="a-middle-graphic"></div>
                </div>
            </div>
            <nav>
                <a id="bb-nav-prev" href="#" class="bb-custom-icon bb-custom-icon-arrow-left">Previous</a>
                <a id="bb-nav-next" href="#" class="bb-custom-icon bb-custom-icon-arrow-right">Next</a>
            </nav>
        </div>
    </div>
</div>
<!-- /container -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/jquerypp.custom.js"></script>
<script src="js/jquery.bookblock.js"></script>
<script>
    var Page = (function () {

        var currentIndex = null;


        function onPageChange(index) {
            var prev = $('#bb-nav-prev');
            var next = $('#bb-nav-next');
            var dur = 300;
            prev.fadeTo(currentIndex == null ? 0 : dur, index == 0 ? 1 : 0.5);
            next.fadeTo(currentIndex == null ? 0 : dur, index == 1 ? 1 : 0.5);
            prev.toggleClass('a-inactive', index == 1);
            next.toggleClass('a-inactive', index == 0);
            prev.toggleClass('a-inner', index == 0);
            next.toggleClass('a-inner', index == 0);
            currentIndex = index;
        }

        var config = {
                    $bookBlock: $('#bb-bookblock'),
                    $navNext: $('#bb-nav-next'),
                    $navPrev: $('#bb-nav-prev'),
                    $navFirst: $('#bb-nav-first'),
                    $navLast: $('#bb-nav-last')
                },
                init = function () {
                    config.$bookBlock.bookblock({
                        speed: 800,
                        shadowSides: 0.8,
                        shadowFlip: 0.7,
                        orientation: 'horizontal',
                        onBeforeFlip: onPageChange
                    });
                    initEvents();
                },
                initEvents = function () {

                    var $slides = config.$bookBlock.children();

                    // add navigation events
                    config.$navNext.on('click touchstart', function () {
                        config.$bookBlock.bookblock('next');
                        return false;
                    });

                    config.$navPrev.on('click touchstart', function () {
                        config.$bookBlock.bookblock('prev');
                        return false;
                    });


                    // add swipe events
                    $slides.on({
                        'swipeup': function (event) {
                            config.$bookBlock.bookblock('next');
                            return false;
                        },
                        'swipedown': function (event) {
                            config.$bookBlock.bookblock('prev');
                            return false;
                        },
                        'click touchstart': function (event) {
                            var index = config.$bookBlock.find('[style*="block"]').index();
                            var nextIndex = index == 1 ? 0 : 1;
                            config.$bookBlock.bookblock('jump', nextIndex + 1);

                        }
                    });

                    // add keyboard events
                    $(document).keydown(function (e) {
                        var keyCode = e.keyCode || e.which,
                                arrow = {
                                    left: 37,
                                    up: 38,
                                    right: 39,
                                    down: 40
                                };

                        switch (keyCode) {
                            case arrow.up:
                                config.$bookBlock.bookblock('prev');
                                break;
                            case arrow.down:
                                config.$bookBlock.bookblock('next');
                                break;
                        }
                    });

                    onPageChange(1);


                    if (window.location.hash == "#inner") {
                        config.$bookBlock.bookblock('next');
                    }
                    else if (window.location.hash == "" && location.host != "") {
                        document.body.innerHTML = "";
                        console.warn("no hash");
                    }
                    else if (window.location.hash.trim().length) {
                        var secretData = window.location.hash.substr(1);
//                        var encrypted = CryptoJS.AES.encrypt("Sz. P. Aleksandrę Kucharską", "YOU ARE HACKER").toString();
                        var decrypted = CryptoJS.AES.decrypt(secretData, "YOU ARE HACKER").toString(CryptoJS.enc.Utf8);
                        if (decrypted != "") {
                            $('#person').text(decrypted);
                        }
                        else {
                            document.body.innerHTML = "";
                            console.warn("bad hash");
                        }

                    }
                };

        return {init: init};

    })();
</script>
<script>
    Page.init();
</script>
</body>
</html>